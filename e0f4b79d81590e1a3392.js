(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{366:function(t,e,r){},385:function(t,e,r){"use strict";var s=r(366);r.n(s).a},404:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"group-project"},[r("div",{staticClass:"main-title-project"},[t._v("Редактирование работы")]),r("div",{staticClass:"main-project"},[r("form",{staticClass:"form-project",on:{submit:function(e){return e.preventDefault(),t.checkFields(e)}}},[r("div",{staticClass:"form",style:{backgroundImage:"url("+t.renderedPhoto+")"}},[r("label",{staticClass:"form_label",attrs:{for:"photo"}}),r("span",{staticClass:"form__text",class:{hidden:t.renderedPhoto.length}},[t._v('Перетащите или нажмите "Загрузить" для загрузки изображения')]),r("button-section",{class:{hidden:t.renderedPhoto.length},attrs:{buttonTitle:t.buttonNameLoad}}),r("input",{staticClass:"form__input",attrs:{type:"file",id:"photo",name:"photo",multiple:"",accept:"image/*,image/jpeg"},on:{change:t.uploadRenderedPhoto}}),t.isErrorPhoto?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()],1),r("div",{staticClass:"content-project"},[r("div",{staticClass:"project-info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newProject.title,expression:"newProject.title"}],staticClass:"input input_name",domProps:{value:t.newProject.title},on:{input:function(e){e.target.composing||t.$set(t.newProject,"title",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Название")]),t.isErrorName?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()]),r("div",{staticClass:"project-info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newProject.link,expression:"newProject.link"}],staticClass:"input input_ref",domProps:{value:t.newProject.link},on:{input:function(e){e.target.composing||t.$set(t.newProject,"link",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Ссылка")]),t.isErrorRef?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()]),r("div",{staticClass:"project-info"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newProject.description,expression:"newProject.description"}],staticClass:"textarea",domProps:{value:t.newProject.description},on:{input:function(e){e.target.composing||t.$set(t.newProject,"description",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Описание")]),t.isErrorDesc?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()]),r("div",{staticClass:"project-info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newProject.techs,expression:"newProject.techs"}],staticClass:"input input_tags",domProps:{value:t.newProject.techs},on:{input:function(e){e.target.composing||t.$set(t.newProject,"techs",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Добавление тэга")]),t.isErrorTags?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e(),r("div",{staticClass:"tag-create"},[r("ul",{staticClass:"tag-create__list"},t._l(t.makeArrayFromString,function(e,s){return r("li",{key:s,staticClass:"tag-create__item"},[r("tag-component",{attrs:{tagTitle:e,tagIndex:s},on:{removeTag:t.removeTag}})],1)}),0)])]),r("div",{staticClass:"button-add-projects"},[r("button",{staticClass:"reset-button",attrs:{type:"reset",title:"Отменить изменения"},on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v("Отмена")]),r("button-section",{attrs:{buttonTitle:t.buttonNameSave,type:"submit",title:"Сохранить изменения"},on:{checkFields:t.checkFields}})],1)])])])])};s._withStripped=!0;var o={name:"editProject",components:{buttonSection:function(){return r.e(0).then(r.bind(null,405))},tagComponent:function(){return r.e(2).then(r.bind(null,399))}},data:function(){return{renderedPhoto:"",newProject:{title:"",techs:"",photo:"",link:"",description:""},buttonNameLoad:"Загрузить",buttonNameSave:"Сохранить",errorMessage:"Это поле должно быть заполнено",isErrorPhoto:!1,isErrorName:!1,isErrorRef:!1,isErrorDesc:!1,isErrorTags:!1}},props:{editedProject:{type:Object,default:function(){return{}},required:!0},projects:{type:Array,default:function(){return{}},required:!0}},created:function(){this.newProject=this.editedProject,this.renderedPhoto=this.imgPath},computed:{makeArrayFromString:function(){if(null!=this.newProject.techs&&""!=this.newProject.techs)return this.newProject.techs.split(",")},imgPath:function(){var t=this.editedProject.photo;return"".concat("https://webdev-api.loftschool.com","/").concat(t)}},methods:{removeTag:function(t){var e=this.newProject.techs.split(",").filter(function(e,r){return r!==t});return this.newProject.techs=e.join(",")},resetForm:function(){this.renderedPhoto="",this.newProject={},this.$emit("resetForm")},uploadRenderedPhoto:function(t){var e=this,r=t.target.files[0];this.newProject.photo=r;var s=new FileReader;try{s.readAsDataURL(r),s.onload=function(){e.renderedPhoto=s.result}}catch(t){}},editExistedProject:function(){this.$emit("editExistedProject",this.newProject)},checkFields:function(){var t=this;this.newProject.photo.size>=15e5?(this.isErrorPhoto=!0,this.errorMessage="Размер фото больше допустимого (1500Кb)",setTimeout(function(){t.isErrorPhoto=!1,t.errorMessage="Это поле должно быть заполнено"},2e3)):null==this.newProject.title||""==this.newProject.title?(this.isErrorName=!0,setTimeout(function(){return t.isErrorName=!1},2e3)):null==this.newProject.link||""==this.newProject.link?(this.isErrorRef=!0,setTimeout(function(){return t.isErrorRef=!1},2e3)):null==this.newProject.description||""==this.newProject.description?(this.isErrorDesc=!0,setTimeout(function(){return t.isErrorDesc=!1},2e3)):null==this.newProject.techs||""==this.newProject.techs?(this.isErrorTags=!0,setTimeout(function(){return t.isErrorTags=!1},2e3)):this.editExistedProject()}}},i=(r(385),r(342)),n=Object(i.a)(o,s,[],!1,null,"2967d534",null);n.options.__file="src/admin/components/edit-project.vue";e.default=n.exports}}]);