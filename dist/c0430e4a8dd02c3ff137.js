(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{364:function(t,e,r){},383:function(t,e,r){"use strict";var s=r(364);r.n(s).a},402:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"group-project"},[r("div",{staticClass:"main-title-project"},[t._v("Добавление работы")]),r("div",{staticClass:"main-project"},[r("form",{staticClass:"form-project",on:{submit:function(e){return e.preventDefault(),t.checkFields(e)}}},[r("div",{staticClass:"form",style:{backgroundImage:"url("+t.renderedPhoto+")"}},[r("label",{staticClass:"form_label",class:{"hidden-label":t.renderedPhoto.length},attrs:{for:"photo"}}),r("span",{staticClass:"form__text",class:{hidden:t.renderedPhoto.length}},[t._v('Перетащите или нажмите "Загрузить" для загрузки изображения')]),r("button-section",{class:{hidden:t.renderedPhoto.length},attrs:{buttonTitle:t.buttonNameLoad}}),r("input",{staticClass:"form__input",attrs:{type:"file",id:"photo",accept:"image/*,image/jpeg"},on:{change:t.uploadRenderedPhoto}}),t.isErrorPhoto?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()],1),r("div",{staticClass:"content-project"},[r("div",{staticClass:"project-info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.project.title,expression:"project.title"}],staticClass:"input input_name",domProps:{value:t.project.title},on:{input:function(e){e.target.composing||t.$set(t.project,"title",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Название")]),t.isErrorName?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()]),r("div",{staticClass:"project-info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.project.link,expression:"project.link"}],staticClass:"input input_ref",domProps:{value:t.project.link},on:{input:function(e){e.target.composing||t.$set(t.project,"link",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Ссылка")]),t.isErrorRef?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()]),r("div",{staticClass:"project-info"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.project.description,expression:"project.description"}],staticClass:"textarea",domProps:{value:t.project.description},on:{input:function(e){e.target.composing||t.$set(t.project,"description",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Описание")]),t.isErrorDesc?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()]),r("div",{staticClass:"project-info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.project.techs,expression:"project.techs"}],staticClass:"input input_tags",domProps:{value:t.project.techs},on:{input:function(e){e.target.composing||t.$set(t.project,"techs",e.target.value)}}}),r("div",{staticClass:"project-text"},[t._v("Добавление тэга")]),t.isErrorTags?r("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e(),r("div",{staticClass:"tag-create"},[r("ul",{staticClass:"tag-create__list"},t._l(t.makeArrayFromString,function(e,s){return r("li",{key:s,staticClass:"tag-create__item"},[r("tag-component",{attrs:{tagTitle:e,tagIndex:s},on:{removeTag:t.removeTag}})],1)}),0)])]),r("div",{staticClass:"button-add-projects"},[r("button",{staticClass:"reset-button",attrs:{type:"reset",title:"Отменить изменения"},on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[t._v("Отмена")]),r("button-section",{attrs:{buttonTitle:t.buttonNameSave,type:"submit",title:"Сохранить изменения"},on:{checkFields:t.checkFields}})],1)])])])])};s._withStripped=!0;var o={name:"addProject",data:function(){return{renderedPhoto:"",project:{title:"",techs:"",photo:"",link:"",description:""},buttonNameLoad:"Загрузить",buttonNameSave:"Сохранить",errorMessage:"Это поле должно быть заполнено",isErrorPhoto:!1,isErrorName:!1,isErrorRef:!1,isErrorDesc:!1,isErrorTags:!1}},components:{buttonSection:function(){return r.e(0).then(r.bind(null,405))},tagComponent:function(){return r.e(2).then(r.bind(null,399))}},computed:{makeArrayFromString:function(){if(null!=this.project.techs&&""!=this.project.techs)return this.project.techs.split(",")}},methods:{removeTag:function(t){var e=this.project.techs.split(",").filter(function(e,r){return r!==t});return this.project.techs=e.join(",")},resetForm:function(){this.renderedPhoto="",this.project={}},uploadRenderedPhoto:function(t){var e=this,r=t.target.files[0];this.project.photo=r;var s=new FileReader;try{s.readAsDataURL(r),s.onload=function(){e.renderedPhoto=s.result}}catch(t){}},addNewProject:function(){this.$emit("addNewProject",this.project)},checkFields:function(){var t=this;null==this.project.photo.size?(this.isErrorPhoto=!0,this.errorMessage="Это поле должно быть заполнено",setTimeout(function(){return t.isErrorPhoto=!1},2e3)):this.project.photo.size>=15e5?(this.isErrorPhoto=!0,this.errorMessage="Размер фото больше допустимого (1500Кb)",setTimeout(function(){return t.isErrorPhoto=!1},2e3)):null==this.project.title||""==this.project.title?(this.isErrorName=!0,setTimeout(function(){return t.isErrorName=!1},2e3)):null==this.project.link||""==this.project.link?(this.isErrorRef=!0,setTimeout(function(){return t.isErrorRef=!1},2e3)):null==this.project.description||""==this.project.description?(this.isErrorDesc=!0,setTimeout(function(){return t.isErrorDesc=!1},2e3)):null==this.project.techs||""==this.project.techs?(this.isErrorTags=!0,setTimeout(function(){return t.isErrorTags=!1},2e3)):this.addNewProject()}}},i=(r(383),r(342)),n=Object(i.a)(o,s,[],!1,null,"85a4e0e6",null);n.options.__file="src/admin/components/add-project.vue";e.default=n.exports}}]);